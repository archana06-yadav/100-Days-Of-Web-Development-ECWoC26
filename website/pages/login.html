<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Academy Access | 100 Days of Web Dev</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="icon" href="../assets/images/logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #ff9d00;
      --bg: #030303;
      --card: rgba(10,10,10,0.8);
      --border: rgba(255,255,255,0.1);
      --text-muted: #aaa;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Plus Jakarta Sans', sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, rgba(255,157,0,0.15), transparent 60%), var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }

    .auth-card {
      width: 100%;
      max-width: 420px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 28px;
      padding: 2.5rem;
      text-align: center;
      backdrop-filter: blur(25px);
    }

    img {
      width: 90px;
      margin-bottom: 1.5rem;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: .5rem;
    }

    .subtext {
      color: var(--text-muted);
      margin-bottom: 2rem;
    }

    .tabs {
      display: flex;
      background: rgba(255,255,255,0.08);
      border-radius: 50px;
      padding: 4px;
      margin-bottom: 1.5rem;
    }

    .tab {
      flex: 1;
      padding: 10px;
      border: none;
      background: none;
      color: #aaa;
      font-weight: 700;
      cursor: pointer;
      border-radius: 50px;
    }

    .tab.active {
      background: var(--primary);
      color: black;
    }

    input {
      width: 100%;
      padding: 1rem;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      color: white;
      margin-bottom: 1rem;
    }

    button.main {
      width: 100%;
      padding: 1rem;
      border-radius: 14px;
      border: none;
      background: var(--primary);
      color: black;
      font-weight: 800;
      cursor: pointer;
      margin-top: .5rem;
    }

    .hidden {
      display: none;
    }

    .divider {
      margin: 2rem 0 1rem;
      font-size: .75rem;
      color: #777;
    }

    .social {
      width: 100%;
      padding: .9rem;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.06);
      color: white;
      cursor: pointer;
      margin-bottom: .7rem;
    }
  </style>
</head>

<body>

  <div class="auth-card">
    <img src="../assets/images/logo.png" alt="Logo" />

    <h1 id="title">Welcome Back</h1>
    <p class="subtext" id="subtitle">Authorized personnel only.</p>

    <div class="tabs">
      <button class="tab active" onclick="switchTab('login')">Login</button>
      <button class="tab" onclick="switchTab('register')">Register</button>
    </div>
  </div>

    <!-- LOGIN -->
    <form id="loginForm" onsubmit="handleAuth(event, 'login')">
      <input type="email" placeholder="Email Address" required />
      <input type="password" placeholder="Access Code" required />
      <button class="main">Join Now</button>
    </form>

    <!-- REGISTER -->
    <form id="registerForm" class="hidden" onsubmit="handleAuth(event, 'register')">
      <input type="text" placeholder="Full Name" required />
      <input type="email" placeholder="Email Address" required />
      <input type="password" placeholder="New Access Code" required />
      <button class="main">Create Academy ID</button>
    </form>

    <div class="divider">External Access</div>

    <button class="social" onclick="signInWithGoogle()">Continue with Google</button>
    <button class="social" onclick="signInWithGitHub()">Continue with GitHub</button>
  </div>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import {
      getAuth,
      signInWithPopup,
      GoogleAuthProvider,
      GithubAuthProvider,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDZqZKcsk3BxIaiGhdr-fdtSPugwvSDnAQ",
      authDomain: "days-8c631.firebaseapp.com",
      projectId: "days-8c631",
      appId: "1:624144787653:web:54330eaa3209e00118a8ac"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    window.switchTab = (type) => {
      document.getElementById('loginForm').classList.toggle('hidden', type !== 'login');
      document.getElementById('registerForm').classList.toggle('hidden', type !== 'register');

      document.getElementById('title').innerText =
        type === 'login' ? 'Welcome Back' : 'Join Academy';

      document.getElementById('subtitle').innerText =
        type === 'login'
          ? 'Authorized personnel only.'
          : 'Create your developer identity.';

      document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
    };

    window.handleAuth = async (e, mode) => {
      e.preventDefault();
      const inputs = e.target.querySelectorAll('input');
      const email = inputs[mode === 'login' ? 0 : 1].value;
      const password = inputs[inputs.length - 1].value;

      try {
        if (mode === 'register') {
          await createUserWithEmailAndPassword(auth, email, password);
        } else {
          await signInWithEmailAndPassword(auth, email, password);
        }
        window.location.href = "dashboard.html";
      } catch (err) {
        alert(err.message);
      }
    };

    window.signInWithGoogle = async () => {
      const provider = new GoogleAuthProvider();
      await signInWithPopup(auth, provider);
      window.location.href = "dashboard.html";
    };

    window.signInWithGitHub = async () => {
      const provider = new GithubAuthProvider();
      await signInWithPopup(auth, provider);
      window.location.href = "dashboard.html";
    };
  </script>

</body>
</html>
